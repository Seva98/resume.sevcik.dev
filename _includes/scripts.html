<script>
    // NAVBAR BURGER TOGGLE
    document.addEventListener('DOMContentLoaded', () => {
        // Get all "navbar-burger" elements
        const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
        // Check if there are any navbar burgers
        if ($navbarBurgers.length > 0) {
            // Add a click event on each of them
            $navbarBurgers.forEach(el => {
                el.addEventListener('click', () => {
                    // Get the target from the "data-target" attribute
                    const target = el.dataset.target;
                    const $target = document.getElementById(target);
                    // Toggle the "is-active" class on both the "navbar-burger" and the "navbar-menu"
                    el.classList.toggle('is-active');
                    $target.classList.toggle('is-active');

                });
            });
        }
    });
</script>
<script src="{{ '/assets/js/lazysizes.min.js'| absolute_url }}"></script> 
<script>
    // FORMATS IMAGE THAT ARE IN THE SAME LINE TO BE NEXT TO EACH OTHER
    (function () {
        const paragraphs = document.getElementsByTagName('p')
        const paragraphsWithImages = []
        for (i in paragraphs) {
            const paragraph = paragraphs[i]
            if (typeof paragraph === 'object') {
                const paragraphWithImages = paragraph.getElementsByTagName("img")
                if (paragraphWithImages.length > 1) {
                    paragraphsWithImages.push(paragraphWithImages)
                }
            }
        }

        for (i in paragraphsWithImages) {
            const wrapper = document.createElement('div')
            wrapper.classList.add('columns')
            const pWithImages = paragraphsWithImages[i]
            const paragraph = pWithImages[0].parentElement
            paragraph.appendChild(wrapper)
            if (typeof pWithImages === 'object') {
                for (let j = 0; j < pWithImages.length; j++) {
                    const imgWrapper = document.createElement('div')
                    imgWrapper.classList.add('column')
                    wrapper.appendChild(imgWrapper)
                    // When image is moved then next image in the row goes to first 0 position
                    let img = pWithImages[0]
                    imgWrapper.appendChild(img)
                }
            }
        }
    })()
</script>
<script>
    // SCROLL BAR
    const progressContainer = document.createElement('DIV')
    progressContainer.id = 'progress-container' 
    progressContainer.innerHTML = '<div id="progress-bar">&nbsp;</div>'
    document.body.prepend(progressContainer)
    window.addEventListener('scroll', () => {
        const contentHeight = document.getElementById("main-content").clientHeight
        const heroHeight = window.innerHeight
        const currentScroll = window.pageYOffset
        const withoutFooterHeight = heroHeight + contentHeight
        if (contentHeight > heroHeight) {
            const height = withoutFooterHeight - 2 * heroHeight
            const progress = currentScroll / height
            const scrolled = progress * 100
            document.getElementById("progress-bar").style.width = scrolled < 1 ? "0%" : scrolled + "%"
        }
    });
</script>
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            'gtm.start': new Date().getTime(),
            event: 'gtm.js'
        });
        var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s),
            dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src =
            'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-KR5KP8K');
</script>
<!-- End Google Tag Manager -->